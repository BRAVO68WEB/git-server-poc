{
  "openapi": "3.0.3",
  "info": {
    "title": "GitHut - Git Server API",
    "description": "A self-hosted Git server API that provides repository management, authentication, SSH key management, and Git Smart HTTP protocol support.",
    "version": "1.0.0",
    "contact": {
      "name": "Bravo68Web"
    },
    "license": {
      "name": "MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Local development server"
    }
  ],
  "tags": [
    {
      "name": "Health",
      "description": "Health check endpoints"
    },
    {
      "name": "Authentication",
      "description": "User authentication and registration"
    },
    {
      "name": "SSH Keys",
      "description": "SSH key management for Git SSH access"
    },
    {
      "name": "Repositories",
      "description": "Repository management operations"
    },
    {
      "name": "Branches",
      "description": "Branch management operations"
    },
    {
      "name": "Tags",
      "description": "Tag management operations"
    },
    {
      "name": "Commits",
      "description": "Commit history and details"
    },
    {
      "name": "Code",
      "description": "File tree, content, and blame information"
    },
    {
      "name": "Git Protocol",
      "description": "Git Smart HTTP protocol endpoints"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "tags": ["Health"],
        "summary": "Health check",
        "description": "Returns the health status of the API",
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "API is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "example": "Git Server API"
                    },
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register a new user",
        "description": "Creates a new user account",
        "operationId": "registerUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "User already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Get current user",
        "description": "Returns the currently authenticated user's information",
        "operationId": "getCurrentUser",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "responses": {
          "200": {
            "description": "Current user information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserInfo"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/change-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Change password",
        "description": "Changes the current user's password",
        "operationId": "changePassword",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Password changed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required or invalid current password",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ssh-keys": {
      "get": {
        "tags": ["SSH Keys"],
        "summary": "List SSH keys",
        "description": "Returns all SSH keys for the authenticated user",
        "operationId": "listSSHKeys",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "responses": {
          "200": {
            "description": "List of SSH keys",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListSSHKeysResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["SSH Keys"],
        "summary": "Add SSH key",
        "description": "Adds a new SSH public key for the authenticated user",
        "operationId": "addSSHKey",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddSSHKeyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "SSH key added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddSSHKeyResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid SSH key format",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "SSH key already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ssh-keys/{id}": {
      "get": {
        "tags": ["SSH Keys"],
        "summary": "Get SSH key",
        "description": "Returns a specific SSH key by ID",
        "operationId": "getSSHKey",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "SSH key ID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSH key information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SSHKeyInfo"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "SSH key not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["SSH Keys"],
        "summary": "Delete SSH key",
        "description": "Deletes an SSH key by ID",
        "operationId": "deleteSSHKey",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "SSH key ID",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSH key deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "SSH key deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "SSH key not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos": {
      "get": {
        "tags": ["Repositories"],
        "summary": "List repositories",
        "description": "Returns all repositories for the authenticated user",
        "operationId": "listRepositories",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "responses": {
          "200": {
            "description": "List of repositories",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "repositories": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/RepoResponse"
                      }
                    },
                    "total": {
                      "type": "integer",
                      "example": 5
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Repositories"],
        "summary": "Create repository",
        "description": "Creates a new Git repository",
        "operationId": "createRepository",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRepoRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Repository created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Repository already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/public": {
      "get": {
        "tags": ["Repositories"],
        "summary": "List public repositories",
        "description": "Returns all public repositories with pagination",
        "operationId": "listPublicRepositories",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number",
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "description": "Items per page",
            "schema": {
              "type": "integer",
              "default": 20,
              "minimum": 1,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of public repositories",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "repositories": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/RepoResponse"
                      }
                    },
                    "page": {
                      "type": "integer",
                      "example": 1
                    },
                    "per_page": {
                      "type": "integer",
                      "example": 20
                    },
                    "total": {
                      "type": "integer",
                      "example": 42
                    },
                    "total_pages": {
                      "type": "integer",
                      "example": 3
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}": {
      "get": {
        "tags": ["Repositories"],
        "summary": "Get repository",
        "description": "Returns repository details",
        "operationId": "getRepository",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "responses": {
          "200": {
            "description": "Repository details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Repositories"],
        "summary": "Update repository",
        "description": "Updates repository settings",
        "operationId": "updateRepository",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRepoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Repository updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Repositories"],
        "summary": "Delete repository",
        "description": "Deletes a repository and all its data",
        "operationId": "deleteRepository",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "responses": {
          "200": {
            "description": "Repository deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Repository deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/stats": {
      "get": {
        "tags": ["Repositories"],
        "summary": "Get repository stats",
        "description": "Returns repository statistics",
        "operationId": "getRepositoryStats",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "responses": {
          "200": {
            "description": "Repository statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoStats"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/branches": {
      "get": {
        "tags": ["Branches"],
        "summary": "List branches",
        "description": "Returns all branches in a repository",
        "operationId": "listBranches",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "responses": {
          "200": {
            "description": "List of branches",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BranchListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Branches"],
        "summary": "Create branch",
        "description": "Creates a new branch from a commit",
        "operationId": "createBranch",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BranchRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Branch created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Branch created successfully"
                    },
                    "branch": {
                      "type": "string",
                      "example": "feature/new-feature"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Branch already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/branches/{branch}": {
      "delete": {
        "tags": ["Branches"],
        "summary": "Delete branch",
        "description": "Deletes a branch from the repository",
        "operationId": "deleteBranch",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "branch",
            "in": "path",
            "required": true,
            "description": "Branch name",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Branch deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Branch deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied or cannot delete default branch",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository or branch not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/tags": {
      "get": {
        "tags": ["Tags"],
        "summary": "List tags",
        "description": "Returns all tags in a repository",
        "operationId": "listTags",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "responses": {
          "200": {
            "description": "List of tags",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TagListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Tags"],
        "summary": "Create tag",
        "description": "Creates a new tag pointing to a commit",
        "operationId": "createTag",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TagRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tag created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Tag created successfully"
                    },
                    "tag": {
                      "type": "string",
                      "example": "v1.0.0"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Tag already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/tags/{tag}": {
      "delete": {
        "tags": ["Tags"],
        "summary": "Delete tag",
        "description": "Deletes a tag from the repository",
        "operationId": "deleteTag",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "tag",
            "in": "path",
            "required": true,
            "description": "Tag name",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tag deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Tag deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository or tag not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/commits": {
      "get": {
        "tags": ["Commits"],
        "summary": "List commits",
        "description": "Returns commit history for a repository",
        "operationId": "listCommits",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "ref",
            "in": "query",
            "description": "Git reference (branch, tag, or commit SHA). Defaults to default branch.",
            "schema": {
              "type": "string",
              "example": "main"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number",
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "description": "Commits per page",
            "schema": {
              "type": "integer",
              "default": 30,
              "minimum": 1,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of commits",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommitListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/commits/{sha}": {
      "get": {
        "tags": ["Commits"],
        "summary": "Get commit",
        "description": "Returns details for a specific commit",
        "operationId": "getCommit",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "sha",
            "in": "path",
            "required": true,
            "description": "Commit SHA",
            "schema": {
              "type": "string",
              "minLength": 7,
              "maxLength": 40,
              "example": "abc1234567890def"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Commit details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommitResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository or commit not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/tree/{ref}": {
      "get": {
        "tags": ["Code"],
        "summary": "Get tree root",
        "description": "Returns the root directory listing for a ref",
        "operationId": "getTreeRoot",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          { "$ref": "#/components/parameters/ref" }
        ],
        "responses": {
          "200": {
            "description": "Tree listing",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TreeResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository or ref not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/tree/{ref}/{path}": {
      "get": {
        "tags": ["Code"],
        "summary": "Get tree at path",
        "description": "Returns directory listing at a specific path",
        "operationId": "getTreeAtPath",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          { "$ref": "#/components/parameters/ref" },
          {
            "name": "path",
            "in": "path",
            "required": true,
            "description": "Path within the repository",
            "schema": {
              "type": "string",
              "example": "src/components"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tree listing",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TreeResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository, ref, or path not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/blob/{ref}/{path}": {
      "get": {
        "tags": ["Code"],
        "summary": "Get file content",
        "description": "Returns the content of a file at a specific path and ref. Binary files are base64-encoded.",
        "operationId": "getFileContent",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          { "$ref": "#/components/parameters/ref" },
          {
            "name": "path",
            "in": "path",
            "required": true,
            "description": "File path within the repository",
            "schema": {
              "type": "string",
              "example": "src/main.go"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "File content",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileContentResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository, ref, or file not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/repos/{owner}/{repo}/blame/{ref}/{path}": {
      "get": {
        "tags": ["Code"],
        "summary": "Get file blame",
        "description": "Returns blame information for a file, showing which commit last modified each line",
        "operationId": "getBlame",
        "security": [{ "bearerAuth": [] }, { "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          { "$ref": "#/components/parameters/ref" },
          {
            "name": "path",
            "in": "path",
            "required": true,
            "description": "File path within the repository",
            "schema": {
              "type": "string",
              "example": "src/main.go"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Blame information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BlameResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository, ref, or file not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/info/refs": {
      "get": {
        "tags": ["Git Protocol"],
        "summary": "Git info/refs",
        "description": "Git Smart HTTP protocol info/refs endpoint for capability advertisement",
        "operationId": "gitInfoRefs",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "service",
            "in": "query",
            "required": true,
            "description": "Git service type",
            "schema": {
              "type": "string",
              "enum": ["git-upload-pack", "git-receive-pack"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Git refs advertisement",
            "content": {
              "application/x-git-upload-pack-advertisement": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "application/x-git-receive-pack-advertisement": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/git-upload-pack": {
      "post": {
        "tags": ["Git Protocol"],
        "summary": "Git upload-pack",
        "description": "Git Smart HTTP protocol endpoint for fetch/clone operations",
        "operationId": "gitUploadPack",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/x-git-upload-pack-request": {
              "schema": {
                "type": "string",
                "format": "binary"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Git upload-pack response",
            "content": {
              "application/x-git-upload-pack-result": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/git-receive-pack": {
      "post": {
        "tags": ["Git Protocol"],
        "summary": "Git receive-pack",
        "description": "Git Smart HTTP protocol endpoint for push operations",
        "operationId": "gitReceivePack",
        "security": [{ "basicAuth": [] }],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/x-git-receive-pack-request": {
              "schema": {
                "type": "string",
                "format": "binary"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Git receive-pack response",
            "content": {
              "application/x-git-receive-pack-result": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Permission denied",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/HEAD": {
      "get": {
        "tags": ["Git Protocol"],
        "summary": "Get HEAD reference",
        "description": "Dumb HTTP protocol endpoint to get the HEAD reference",
        "operationId": "getHEAD",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "responses": {
          "200": {
            "description": "HEAD reference",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "example": "ref: refs/heads/main"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/objects/info/packs": {
      "get": {
        "tags": ["Git Protocol"],
        "summary": "Get pack info",
        "description": "Dumb HTTP protocol endpoint to list available pack files",
        "operationId": "getInfoPacks",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" }
        ],
        "responses": {
          "200": {
            "description": "Pack file list",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/objects/{dir}/{file}": {
      "get": {
        "tags": ["Git Protocol"],
        "summary": "Get loose object",
        "description": "Dumb HTTP protocol endpoint to retrieve a loose Git object",
        "operationId": "getLooseObject",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "dir",
            "in": "path",
            "required": true,
            "description": "First 2 characters of the object SHA",
            "schema": {
              "type": "string",
              "minLength": 2,
              "maxLength": 2
            }
          },
          {
            "name": "file",
            "in": "path",
            "required": true,
            "description": "Remaining 38 characters of the object SHA",
            "schema": {
              "type": "string",
              "minLength": 38,
              "maxLength": 38
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Git object data",
            "content": {
              "application/x-git-loose-object": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": {
            "description": "Object not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/objects/pack/{packfile}": {
      "get": {
        "tags": ["Git Protocol"],
        "summary": "Get pack file",
        "description": "Dumb HTTP protocol endpoint to retrieve a pack file or index",
        "operationId": "getPackFile",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "packfile",
            "in": "path",
            "required": true,
            "description": "Pack file name (e.g., pack-xxx.pack or pack-xxx.idx)",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pack file data",
            "content": {
              "application/x-git-packed-objects": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "application/x-git-packed-objects-toc": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": {
            "description": "Pack file not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/refs/heads/{branch}": {
      "get": {
        "tags": ["Git Protocol"],
        "summary": "Get branch ref",
        "description": "Dumb HTTP protocol endpoint to get a branch reference",
        "operationId": "getBranchRef",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "branch",
            "in": "path",
            "required": true,
            "description": "Branch name",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Branch SHA",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Branch not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/{owner}/{repo}/refs/tags/{tag}": {
      "get": {
        "tags": ["Git Protocol"],
        "summary": "Get tag ref",
        "description": "Dumb HTTP protocol endpoint to get a tag reference",
        "operationId": "getTagRef",
        "security": [{ "basicAuth": [] }, {}],
        "parameters": [
          { "$ref": "#/components/parameters/owner" },
          { "$ref": "#/components/parameters/repo" },
          {
            "name": "tag",
            "in": "path",
            "required": true,
            "description": "Tag name",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tag SHA",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Tag not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Bearer token authentication"
      },
      "basicAuth": {
        "type": "http",
        "scheme": "basic",
        "description": "Basic authentication with username and password"
      }
    },
    "parameters": {
      "owner": {
        "name": "owner",
        "in": "path",
        "required": true,
        "description": "Repository owner username",
        "schema": {
          "type": "string"
        }
      },
      "repo": {
        "name": "repo",
        "in": "path",
        "required": true,
        "description": "Repository name",
        "schema": {
          "type": "string"
        }
      },
      "ref": {
        "name": "ref",
        "in": "path",
        "required": true,
        "description": "Git reference (branch name, tag name, or commit SHA)",
        "schema": {
          "type": "string",
          "example": "main"
        }
      }
    },
    "schemas": {
      "RegisterRequest": {
        "type": "object",
        "required": ["username", "email", "password"],
        "properties": {
          "username": {
            "type": "string",
            "minLength": 3,
            "maxLength": 50,
            "example": "johndoe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "john@example.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "minLength": 8,
            "example": "securepassword123"
          }
        }
      },
      "RegisterResponse": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserInfo"
          },
          "message": {
            "type": "string",
            "example": "User registered successfully"
          }
        }
      },
      "UserInfo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "username": {
            "type": "string",
            "example": "johndoe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "john@example.com"
          },
          "is_admin": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "ChangePasswordRequest": {
        "type": "object",
        "required": ["current_password", "new_password"],
        "properties": {
          "current_password": {
            "type": "string",
            "format": "password",
            "example": "oldpassword123"
          },
          "new_password": {
            "type": "string",
            "format": "password",
            "minLength": 8,
            "example": "newpassword456"
          }
        }
      },
      "AddSSHKeyRequest": {
        "type": "object",
        "required": ["title", "key"],
        "properties": {
          "title": {
            "type": "string",
            "description": "A descriptive name for the SSH key",
            "example": "My Laptop"
          },
          "key": {
            "type": "string",
            "description": "The public SSH key in OpenSSH format",
            "example": "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIExample... user@laptop"
          }
        }
      },
      "AddSSHKeyResponse": {
        "type": "object",
        "properties": {
          "key": {
            "$ref": "#/components/schemas/SSHKeyInfo"
          },
          "message": {
            "type": "string",
            "example": "SSH key added successfully"
          }
        }
      },
      "SSHKeyInfo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "title": {
            "type": "string",
            "example": "My Laptop"
          },
          "fingerprint": {
            "type": "string",
            "description": "SHA256 fingerprint of the public key",
            "example": "SHA256:abc123def456ghi789jkl012mno345pqr678stu901v"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00Z"
          }
        }
      },
      "ListSSHKeysResponse": {
        "type": "object",
        "properties": {
          "keys": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SSHKeyInfo"
            }
          },
          "total": {
            "type": "integer",
            "example": 2
          }
        }
      },
      "CreateRepoRequest": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "pattern": "^[a-zA-Z0-9._-]+$",
            "example": "my-project"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "example": "A sample project repository"
          },
          "is_private": {
            "type": "boolean",
            "default": false,
            "example": false
          }
        }
      },
      "UpdateRepoRequest": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "maxLength": 500,
            "example": "Updated description"
          },
          "is_private": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "RepoResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "example": "my-project"
          },
          "owner": {
            "type": "string",
            "example": "johndoe"
          },
          "owner_id": {
            "type": "string",
            "format": "uuid",
            "example": "550e8400-e29b-41d4-a716-446655440001"
          },
          "is_private": {
            "type": "boolean",
            "example": false
          },
          "description": {
            "type": "string",
            "example": "A sample project repository"
          },
          "clone_url": {
            "type": "string",
            "format": "uri",
            "example": "http://localhost:8080/johndoe/my-project.git"
          },
          "ssh_url": {
            "type": "string",
            "example": "ssh://git@localhost:2222/johndoe/my-project.git"
          },
          "git_path": {
            "type": "string",
            "example": "/data/repos/johndoe/my-project.git"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00Z"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00Z"
          }
        }
      },
      "RepoStats": {
        "type": "object",
        "properties": {
          "commits": {
            "type": "integer",
            "example": 150
          },
          "branches": {
            "type": "integer",
            "example": 5
          },
          "tags": {
            "type": "integer",
            "example": 3
          },
          "contributors": {
            "type": "integer",
            "example": 10
          },
          "size_bytes": {
            "type": "integer",
            "format": "int64",
            "example": 1048576
          }
        }
      },
      "BranchRequest": {
        "type": "object",
        "required": ["name", "commit_hash"],
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "example": "feature/new-feature"
          },
          "commit_hash": {
            "type": "string",
            "minLength": 40,
            "maxLength": 40,
            "pattern": "^[a-f0-9]{40}$",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          }
        }
      },
      "BranchResponse": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "main"
          },
          "hash": {
            "type": "string",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          },
          "is_head": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "BranchListResponse": {
        "type": "object",
        "properties": {
          "branches": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BranchResponse"
            }
          },
          "total": {
            "type": "integer",
            "example": 5
          }
        }
      },
      "TagRequest": {
        "type": "object",
        "required": ["name", "commit_hash"],
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 255,
            "example": "v1.0.0"
          },
          "commit_hash": {
            "type": "string",
            "minLength": 40,
            "maxLength": 40,
            "pattern": "^[a-f0-9]{40}$",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          },
          "message": {
            "type": "string",
            "description": "Optional message for annotated tag",
            "example": "Release version 1.0.0"
          }
        }
      },
      "TagResponse": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "v1.0.0"
          },
          "hash": {
            "type": "string",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          },
          "message": {
            "type": "string",
            "example": "Release version 1.0.0"
          },
          "tagger": {
            "type": "string",
            "example": "John Doe <john@example.com>"
          },
          "is_annotated": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "TagListResponse": {
        "type": "object",
        "properties": {
          "tags": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TagResponse"
            }
          },
          "total": {
            "type": "integer",
            "example": 3
          }
        }
      },
      "CommitResponse": {
        "type": "object",
        "properties": {
          "hash": {
            "type": "string",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          },
          "short_hash": {
            "type": "string",
            "example": "a1b2c3d"
          },
          "message": {
            "type": "string",
            "example": "Add new feature"
          },
          "author": {
            "type": "string",
            "example": "John Doe"
          },
          "author_email": {
            "type": "string",
            "format": "email",
            "example": "john@example.com"
          },
          "author_date": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00Z"
          },
          "committer": {
            "type": "string",
            "example": "John Doe"
          },
          "committer_email": {
            "type": "string",
            "format": "email",
            "example": "john@example.com"
          },
          "committer_date": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00Z"
          },
          "parent_hashes": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": ["b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1"]
          }
        }
      },
      "CommitListResponse": {
        "type": "object",
        "properties": {
          "commits": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CommitResponse"
            }
          },
          "total": {
            "type": "integer",
            "example": 150
          },
          "ref": {
            "type": "string",
            "example": "main"
          }
        }
      },
      "TreeEntryResponse": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "main.go"
          },
          "path": {
            "type": "string",
            "example": "src/main.go"
          },
          "type": {
            "type": "string",
            "enum": ["blob", "tree"],
            "example": "blob"
          },
          "mode": {
            "type": "string",
            "example": "100644"
          },
          "hash": {
            "type": "string",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          },
          "size": {
            "type": "integer",
            "format": "int64",
            "description": "Size in bytes (only for blob entries)",
            "example": 1024
          }
        }
      },
      "TreeResponse": {
        "type": "object",
        "properties": {
          "entries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TreeEntryResponse"
            }
          },
          "path": {
            "type": "string",
            "example": "src"
          },
          "ref": {
            "type": "string",
            "example": "main"
          },
          "total": {
            "type": "integer",
            "example": 10
          }
        }
      },
      "FileContentResponse": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "example": "src/main.go"
          },
          "name": {
            "type": "string",
            "example": "main.go"
          },
          "size": {
            "type": "integer",
            "format": "int64",
            "example": 1024
          },
          "hash": {
            "type": "string",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          },
          "content": {
            "type": "string",
            "description": "File content (base64-encoded for binary files)",
            "example": "package main\n\nfunc main() {\n\t// ...\n}"
          },
          "is_binary": {
            "type": "boolean",
            "example": false
          },
          "encoding": {
            "type": "string",
            "enum": ["utf-8", "base64"],
            "description": "Content encoding: utf-8 for text, base64 for binary",
            "example": "utf-8"
          },
          "ref": {
            "type": "string",
            "example": "main"
          }
        }
      },
      "BlameLineResponse": {
        "type": "object",
        "properties": {
          "line_no": {
            "type": "integer",
            "example": 1
          },
          "commit": {
            "type": "string",
            "example": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
          },
          "author": {
            "type": "string",
            "example": "John Doe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "john@example.com"
          },
          "date": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00Z"
          },
          "content": {
            "type": "string",
            "example": "package main"
          }
        }
      },
      "BlameResponse": {
        "type": "object",
        "properties": {
          "blame": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BlameLineResponse"
            }
          },
          "path": {
            "type": "string",
            "example": "src/main.go"
          },
          "ref": {
            "type": "string",
            "example": "main"
          },
          "total": {
            "type": "integer",
            "example": 100
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "not_found"
          },
          "message": {
            "type": "string",
            "example": "Repository not found"
          },
          "details": {
            "type": "string",
            "example": "Additional error details"
          }
        }
      }
    }
  }
}
